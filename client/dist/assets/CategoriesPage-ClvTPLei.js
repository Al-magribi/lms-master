import{i as e,y as a,z as s,d as t,j as i,m as l}from"./index-DxiHux_d.js";import{b as n}from"./vendor-CnnDPxwB.js";import{L as r}from"./Layout-BWZgGjOq.js";import{u as d}from"./index-B8CuzAwO.js";import{C as c}from"./CmsModal-B3HsRj5W.js";import{C as o}from"./CmsForm-DuteKL6_.js";import{T as m}from"./Table-C87Jt7gp.js";const u=({homepage:u})=>{const[x,g]=n.useState(!1),[h,j]=n.useState("add"),[b,p]=n.useState(null),[y,N]=n.useState(1),[v,f]=n.useState(10),[C,w]=n.useState(""),[S,L]=n.useState(0),{data:k,isLoading:T,refetch:A}=e({page:y,limit:v,search:C}),{result:F=[],totalData:K,totalPage:P}=k||{},[q,{isLoading:B,isSuccess:D,error:E,data:_,reset:z}]=a(),[M,{isLoading:O}]=s();n.useEffect((()=>{var e;D&&(t.success((null==_?void 0:_.message)||"Category saved successfully"),g(!1),A(),p(null),L((e=>e+1)),z()),E&&(t.error(null==(e=E.data)?void 0:e.message),z())}),[D,E,_,z,A]);return i.jsxs(r,{title:"Kategori",levels:["cms"],children:[i.jsx("div",{className:"container-fluid py-3 py-md-4",children:i.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("div",{className:"p-3 rounded me-3",style:{color:null==u?void 0:u.primary_color,backgroundColor:null==u?void 0:u.secondary_color},children:i.jsx(d,{className:"fs-4"})}),i.jsx("h4",{className:"mb-0",children:"Kategori"})]}),i.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{j("add"),p(null),g(!0)},children:[i.jsx("span",{className:"bi bi-plus-circle"}),i.jsx("span",{className:"ms-2",children:"Tambah Kategori"})]})]}),i.jsx("div",{className:"card border-0 shadow-sm",children:i.jsx("div",{className:"card-body",children:i.jsx(m,{isLoading:T,page:y,setPage:N,totalPages:P,limit:v,setLimit:f,setSearch:w,totalData:K,children:i.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center align-middle",children:"No"}),i.jsx("th",{className:"text-center align-middle",children:"Name"}),i.jsx("th",{className:"text-center align-middle",children:"Actions"})]})}),i.jsx("tbody",{children:null==F?void 0:F.map(((e,a)=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-center align-middle",children:(y-1)*v+a+1}),i.jsx("td",{className:"align-middle",children:e.name}),i.jsx("td",{className:"text-center align-middle",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{j("edit"),p(e),g(!0)})(e),children:i.jsx("i",{className:"bi bi-pencil-square"})}),i.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a,s,i;if(window.confirm("Apakah anda yakin ingin menghapus kategori ini?"))try{const i=await M(e).unwrap();console.log(i),200===i.status?(t.success(i.message),A()):t.error(null==(s=null==(a=i.error)?void 0:a.data)?void 0:s.message)}catch(l){t.error((null==(i=l.data)?void 0:i.message)||"Failed to delete category")}})(e.id),disabled:O,children:i.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)))})]})})})})]})}),i.jsx(c,{isOpen:x,onClose:()=>{g(!1),p(null),L((e=>e+1))},title:"add"===h?"Add New Category":"Edit Category",children:i.jsx(o,{fields:[{name:"name",label:"Name",type:"text",required:!0}],initialValues:b||{name:"",description:"",slug:""},onSubmit:async e=>{var a;try{await q(e).unwrap()}catch(s){t.error((null==(a=s.data)?void 0:a.message)||"Failed to save category")}},onCancel:()=>{p(null),g(!1),L((e=>e+1))},submitButtonText:"add"===h?"Add Category":"Update Category",cancelButtonText:"Cancel",isLoading:B},S)})]})};export{u as default};
//# sourceMappingURL=CategoriesPage-ClvTPLei.js.map
