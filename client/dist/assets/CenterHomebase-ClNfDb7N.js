import{K as e,j as s,d as a,N as t,O as n,V as i}from"./index-DAvLbB94.js";import{b as l}from"./vendor-CnnDPxwB.js";import{L as r}from"./Layout-BDsu45_O.js";import{T as d}from"./Table-BVJYUMLF.js";import"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";const c=({detail:t,setDetail:n})=>{const[i,r]=l.useState(""),[d,c]=l.useState(""),[o,{data:m,isLoading:u,isSuccess:x,error:h,reset:j}]=e();return l.useEffect((()=>{t&&(r(t.name),c(t.id))}),[t]),l.useEffect((()=>{x&&(j(),r(""),c("")),h&&j()}),[x]),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),i||a.error("Lenkapi data");const s={id:d,name:i};a.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>{var s;return null==(s=e.data)?void 0:s.message}})},className:"rounded border p-2 d-flex flex-column gap-2",children:[s.jsx("p",{className:"m-0 h6",children:"Satuan Pendidikan"}),s.jsx("input",{type:"text",name:"homebase",className:"form-control",placeholder:"SD / SMP / SMA / SMK / Sekolah",value:i||"",onChange:e=>r(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>n({}),children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:u,children:"Simpan"})]})]})},o=({setDetail:e})=>{const[a,r]=l.useState(1),[c,o]=l.useState(10),[m,u]=l.useState(""),{data:x={}}=t({page:a,limit:c,search:m}),{homebase:h=[],totalPages:j,totalData:b}=x,[p,{isLoading:g,isSuccess:N,error:f,reset:S}]=n();return l.useEffect((()=>{N&&S(),f&&S()}),[N,f]),s.jsx(d,{totalData:b,totalPages:j,page:a,setPage:r,setLimit:o,setSearch:u,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"_id"}),s.jsx("th",{className:"text-center",children:"Satuan Pendidikan"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==h?void 0:h.map(((t,n)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(a-1)*c+n+1}),s.jsx("td",{className:"text-center align-middle",children:t.id}),s.jsx("td",{className:"text-center align-middle",children:t.name}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:g,onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin akan menghapus seluruh data satuan ini?")&&i.promise(p(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},t.id)))})]})})},m=()=>{const[e,a]=l.useState("");return s.jsx(r,{title:"Satuan Pendidikan",levels:["center"],children:s.jsxs("div",{className:"h-100 row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(c,{detail:e,setDetail:a})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(o,{setDetail:a})})]})})};export{m as default};
//# sourceMappingURL=CenterHomebase-ClNfDb7N.js.map
