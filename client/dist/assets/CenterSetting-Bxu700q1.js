import{Y as s,Z as a,j as e,V as i,_ as t,$ as n,a0 as l,m as r}from"./index-DAvLbB94.js";import{b as d}from"./vendor-CnnDPxwB.js";import{L as o}from"./Layout-BDsu45_O.js";import"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";const p=({app:t})=>{const[n,l]=d.useState({id:null==t?void 0:t.id,app_name:(null==t?void 0:t.app_name)||""}),[r,{isLoading:o,isSuccess:p,isError:m,reset:c}]=s(),{refetch:h}=a();return d.useEffect((()=>{t&&l((s=>({...s,id:t.id,app_name:t.app_name||""})))}),[t]),d.useEffect((()=>{(p||m)&&c()}),[p,m,c]),e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:async s=>{s.preventDefault();const a=new FormData;a.append("id",n.id),a.append("app_name",n.app_name),i.promise(r(a).unwrap().then((s=>(h(),s.message))),{loading:"Menyimpan...",success:s=>s,error:s=>s.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Aplikasi"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Nama Aplikasi"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"Nama Aplikasi","aria-describedby":"basic-addon1",name:"app_name",value:n.app_name,onChange:s=>{const{name:a,value:e}=s.target;l((s=>({...s,[a]:e})))}})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"btn btn-sm btn-success",type:"submit",disabled:o,children:o?"Menyimpan...":"Simpan"})})]})},m=({app:s})=>{const[n,l]=d.useState({smtp_host:"",smtp_port:"",smtp_email:"",smtp_password:"",smtp_domain:""}),[r,{isLoading:o}]=t(),{refetch:p}=a();d.useEffect((()=>{s&&l({smtp_host:s.smtp_host||"",smtp_port:s.smtp_port||"",smtp_email:s.smtp_email||"",smtp_password:s.smtp_password||"",smtp_domain:s.smtp_domain||""})}),[s]);const m=s=>{const{name:a,value:e}=s.target;l((s=>({...s,[a]:e})))};return e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:async s=>{s.preventDefault();const a={smtp_host:n.smtp_host,smtp_port:n.smtp_port,smtp_email:n.smtp_email,smtp_password:n.smtp_password,smtp_domain:n.smtp_domain};i.promise(r(a).unwrap().then((s=>(p(),s.message))),{loading:"Menyimpan...",success:s=>s,error:s=>s.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Pengaturan SMTP Email"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-host-label",children:"SMTP Host"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Host","aria-describedby":"smtp-host-label",name:"smtp_host",placeholder:"Masukkan Host SMTP",value:n.smtp_host,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-port-label",children:"SMTP Port"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Port","aria-describedby":"smtp-port-label",name:"smtp_port",placeholder:"Masukkan Port SMTP",value:n.smtp_port,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-email-label",children:"SMTP Email"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Email","aria-describedby":"smtp-email-label",name:"smtp_email",placeholder:"Masukkan Email SMTP",value:n.smtp_email,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-password-label",children:"SMTP Password"}),e.jsx("input",{type:"password",className:"form-control","aria-label":"SMTP Password","aria-describedby":"smtp-password-label",name:"smtp_password",placeholder:"Masukkan Password SMTP",value:n.smtp_password,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-domain-label",children:"SMTP Domain"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Domain","aria-describedby":"smtp-domain-label",name:"smtp_domain",placeholder:"Masukkan Domain",value:n.smtp_domain,onChange:m})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"btn btn-sm btn-success",type:"submit",disabled:o,children:o?"Menyimpan...":"Simpan"})})]})},c=({admin:s})=>{const[t,r]=d.useState({name:"",email:"",phone:"",old_password:"",new_password:""}),[o,{isLoading:p,isSuccess:m,isError:c,reset:h}]=n(),{refetch:u}=a(),[x]=l(),b=s=>{const{name:a,value:e}=s.target;if("phone"===a){let s=e;e.startsWith("0")&&(s="62"+e.substring(1)),r((e=>({...e,[a]:s})))}else r((s=>({...s,[a]:e})))};return d.useEffect((()=>{var a;if(s){const e=(null==(a=s.phone)?void 0:a.startsWith("0"))?"62"+s.phone.substring(1):s.phone;r({name:s.name||"",email:s.email||"",phone:e||"",old_password:"",new_password:""})}}),[s]),d.useEffect((()=>{(m||c)&&(h(),x(),u())}),[m,c]),e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:s=>{s.preventDefault(),i.promise(o(t).unwrap().then((s=>s.message)),{loading:"Menyimpan...",success:s=>s,error:s=>s.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Profile"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",name:"name",value:t.name,onChange:b,"aria-label":"Nama","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",value:t.email,onChange:b,"aria-label":"Email","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Whatsapp"}),e.jsx("input",{type:"text",className:"form-control",name:"phone",value:t.phone,onChange:b,"aria-label":"Whatsapp","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Password Lama"}),e.jsx("input",{type:"password",className:"form-control",name:"old_password",value:t.old_password,onChange:b,"aria-label":"Password Lama","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Password Baru"}),e.jsx("input",{type:"password",className:"form-control",name:"new_password",value:t.new_password,onChange:b,"aria-label":"Password Baru","aria-describedby":"basic-addon1"})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:p,children:p?"Menyimpan...":"Simpan"})})]})},h=({title:s,levels:a})=>e.jsx(o,{title:s,levels:a,children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Memuat data..."})})})}),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3,delayChildren:.2}}},x={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12,duration:.6}}},b=()=>{const{data:s,isLoading:i}=a(),{admin:t,app:n}=s||{};return i?e.jsx(h,{title:"Pengaturan Aplikasi",levels:["center","admin"]}):e.jsx(o,{title:"Pengaturan Aplikasi",levels:["center"],children:e.jsx(r.div,{className:"container-fluid py-4 px-lg-5",variants:u,initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"row g-4",children:[e.jsx(r.div,{className:"col-xl-6 col-lg-8 col-12",variants:x,children:e.jsxs("div",{className:"card border-0 h-100 shadow-sm hover-shadow-lg transition-all",children:[e.jsx("div",{className:"card-header bg-info-subtle border-0 py-3",children:e.jsx("h5",{className:"card-title mb-0 text-info fw-semibold",children:"Pengaturan SMTP"})}),e.jsx("div",{className:"card-body",children:e.jsx(m,{app:n})})]})}),e.jsx(r.div,{className:"col-xl-6 col-lg-8 col-12",variants:x,children:e.jsxs("div",{className:"card border-0 h-100 shadow-sm hover-shadow-lg transition-all",children:[e.jsx("div",{className:"card-header bg-success-subtle border-0 py-3",children:e.jsx("h5",{className:"card-title mb-0 text-success fw-semibold",children:"Profil Admin"})}),e.jsx("div",{className:"card-body",children:e.jsx(c,{admin:t})})]})}),e.jsx(r.div,{className:"col-xl-6 col-lg-8 col-12",variants:x,children:e.jsxs("div",{className:"card border-0 h-100 shadow-sm hover-shadow-lg transition-all",children:[e.jsx("div",{className:"card-header bg-primary-subtle border-0 py-3",children:e.jsx("h5",{className:"card-title mb-0 text-primary fw-semibold",children:"Pengaturan Aplikasi"})}),e.jsx("div",{className:"card-body",children:e.jsx(p,{app:n})})]})})]})})})};export{b as default};
//# sourceMappingURL=CenterSetting-Bxu700q1.js.map
