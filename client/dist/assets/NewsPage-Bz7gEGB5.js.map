{"version":3,"file":"NewsPage-Bz7gEGB5.js","sources":["../../src/page/cms/components/editor/Editor.jsx","../../src/page/cms/News/DetailNews.jsx","../../src/page/cms/News/NewsPage.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactQuill, { Quill } from \"react-quill-new\";\r\nimport QuillResizeImage from \"quill-resize-image\";\r\nimport \"react-quill-new/dist/quill.snow.css\";\r\n\r\n// Register the resize module\r\nQuill.register(\"modules/resize\", QuillResizeImage);\r\n\r\n// Register the audio format\r\nconst AudioBlot = Quill.import(\"blots/block/embed\");\r\n\r\nclass Audio extends AudioBlot {\r\n  static create(value) {\r\n    const node = super.create();\r\n    node.setAttribute(\"controls\", \"\");\r\n    node.setAttribute(\"src\", value);\r\n    return node;\r\n  }\r\n\r\n  static value(node) {\r\n    return node.getAttribute(\"src\");\r\n  }\r\n}\r\n\r\nAudio.blotName = \"audio\";\r\nAudio.tagName = \"audio\";\r\nAudio.className = \"ql-audio\";\r\n\r\nQuill.register(Audio);\r\n\r\nclass Editor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { editorHtml: props.value || \"\" };\r\n    this.reactQuillRef = React.createRef();\r\n  }\r\n\r\n  handleChange = (html) => {\r\n    this.setState({ editorHtml: html });\r\n    this.props.onChange(html);\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.value !== this.props.value) {\r\n      this.setState({ editorHtml: this.props.value });\r\n    }\r\n  }\r\n\r\n  handleImageUpload = () => {\r\n    const input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"file\");\r\n    input.setAttribute(\"accept\", \"image/*\");\r\n    input.click();\r\n\r\n    input.onchange = async () => {\r\n      const file = input.files[0];\r\n      if (file) {\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n\r\n        try {\r\n          const response = await fetch(`/api/cms/news/upload/image`, {\r\n            method: \"POST\",\r\n            body: formData,\r\n          });\r\n          const data = await response.json();\r\n\r\n          const editor = this.reactQuillRef.current?.getEditor();\r\n          if (editor) {\r\n            const range = editor.getSelection(true);\r\n            editor.insertEmbed(range.index, \"image\", data.url);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error uploading image:\", error);\r\n          alert(\"Gagal mengunggah gambar. Coba lagi.\");\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n  handleAudioUpload = () => {\r\n    const input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"file\");\r\n    input.setAttribute(\"accept\", \"audio/*\");\r\n    input.click();\r\n\r\n    input.onchange = async () => {\r\n      const file = input.files[0];\r\n      if (file) {\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n\r\n        try {\r\n          const response = await fetch(`/api/cms/news/upload/audio`, {\r\n            method: \"POST\",\r\n            body: formData,\r\n          });\r\n          const data = await response.json();\r\n\r\n          const editor = this.reactQuillRef.current?.getEditor();\r\n          if (editor) {\r\n            const range = editor.getSelection(true);\r\n            editor.insertEmbed(range.index, \"audio\", data.url);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error uploading audio:\", error);\r\n          alert(\"Gagal mengunggah audio. Coba lagi.\");\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { placeholder, height, classname } = this.props;\r\n\r\n    return (\r\n      <div className=\"d-flex mb-2\" style={{ height: height }}>\r\n        <ReactQuill\r\n          ref={this.reactQuillRef}\r\n          theme=\"snow\"\r\n          value={this.state.editorHtml}\r\n          onChange={this.handleChange}\r\n          modules={Editor.modules(\r\n            this.handleImageUpload,\r\n            this.handleAudioUpload\r\n          )}\r\n          formats={Editor.formats}\r\n          placeholder={placeholder}\r\n          style={{ width: \"100%\" }}\r\n          className={`react-quill border border-2 bg-white rounded ${classname}`}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEditor.modules = (handleImageUpload, handleAudioUpload) => {\r\n  return {\r\n    toolbar: {\r\n      container: [\r\n        [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\r\n        [{ size: [] }],\r\n        [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\r\n        [\r\n          { list: \"ordered\" },\r\n          { list: \"bullet\" },\r\n          { indent: \"-1\" },\r\n          { indent: \"+1\" },\r\n        ],\r\n        [\"link\", \"image\", \"audio\", \"video\"],\r\n        [\"clean\"],\r\n      ],\r\n      handlers: {\r\n        image: handleImageUpload,\r\n        audio: handleAudioUpload,\r\n      },\r\n    },\r\n    clipboard: {\r\n      matchVisual: false,\r\n    },\r\n    resize: {\r\n      modules: [\"Resize\"],\r\n    },\r\n  };\r\n};\r\n\r\nEditor.formats = [\r\n  \"header\",\r\n  \"font\",\r\n  \"size\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strike\",\r\n  \"blockquote\",\r\n  \"list\",\r\n  \"indent\",\r\n  \"link\",\r\n  \"image\",\r\n  \"audio\",\r\n  \"video\",\r\n];\r\n\r\nEditor.propTypes = {\r\n  placeholder: PropTypes.string,\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Editor;\r\n","import React from \"react\";\r\nimport { FaArrowLeft, FaCalendarAlt, FaFolder } from \"react-icons/fa\";\r\nimport Layout from \"../layout/Layout\";\r\n\r\nconst DetailNews = ({ news, onBack }) => {\r\n  if (!news) return null;\r\n\r\n  return (\r\n    <Layout title={news.title} levels={[\"cms\"]}>\r\n      <div className=\"container py-5\">\r\n        <button\r\n          className=\"btn btn-outline-secondary mb-4 d-flex align-items-center\"\r\n          onClick={onBack}\r\n        >\r\n          <FaArrowLeft className=\"me-2\" /> Kembali\r\n        </button>\r\n\r\n        <article className=\"blog-post\">\r\n          <header className=\"mb-4\">\r\n            <h1 className=\"display-5 fw-bold mb-3\">{news.title}</h1>\r\n            <div className=\"d-flex align-items-center text-muted mb-4\">\r\n              <div className=\"d-flex align-items-center me-4\">\r\n                <FaFolder className=\"me-2\" />\r\n                <span>{news.category_name || news.category}</span>\r\n              </div>\r\n              {news.createdat && (\r\n                <div className=\"d-flex align-items-center\">\r\n                  <FaCalendarAlt className=\"me-2\" />\r\n                  <span>\r\n                    {new Date(news.createdat).toLocaleDateString(\"id-ID\", {\r\n                      day: \"numeric\",\r\n                      month: \"long\",\r\n                      year: \"numeric\",\r\n                    })}\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </header>\r\n\r\n          {news.image && (\r\n            <div className=\"mb-4\">\r\n              <img\r\n                src={news.image}\r\n                alt={news.title}\r\n                className=\"img-fluid rounded shadow-sm\"\r\n                style={{\r\n                  maxHeight: \"500px\",\r\n                  width: \"100%\",\r\n                  objectFit: \"cover\",\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            className=\"blog-content\"\r\n            style={{\r\n              fontSize: \"1.1rem\",\r\n              lineHeight: \"1.8\",\r\n              color: \"#333\",\r\n            }}\r\n            dangerouslySetInnerHTML={{ __html: news.content }}\r\n          />\r\n        </article>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default DetailNews;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaNewspaper } from \"react-icons/fa\";\r\nimport Layout from \"../layout/Layout\";\r\nimport CmsModal from \"../components/CmsModal\";\r\nimport CmsForm from \"../components/CmsForm\";\r\nimport Editor from \"../components/editor/Editor\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport {\r\n  useGetNewsQuery,\r\n  useAddNewsMutation,\r\n  useDeleteNewsMutation,\r\n} from \"../../../controller/api/cms/ApiNews\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { useGetCategoryQuery } from \"../../../controller/api/cms/ApiCategory\";\r\nimport DetailNews from \"./DetailNews\";\r\n\r\nconst NewsPage = ({ homepage }) => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [modalType, setModalType] = useState(\"add\");\r\n  const [selectedNews, setSelectedNews] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [formKey, setFormKey] = useState(0);\r\n  const [content, setContent] = useState(\"\");\r\n  const [showDetail, setShowDetail] = useState(false);\r\n  const [detailNews, setDetailNews] = useState(null);\r\n\r\n  const { data: categories } = useGetCategoryQuery({\r\n    page: \"\",\r\n    limit: \"\",\r\n    search: \"\",\r\n  });\r\n\r\n  const { data, isLoading, refetch } = useGetNewsQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n  });\r\n\r\n  const { result: news, totalData, totalPage } = data || {};\r\n\r\n  const [\r\n    addNews,\r\n    { isSuccess, error, isLoading: addLoading, data: msg, reset },\r\n  ] = useAddNewsMutation();\r\n  const [deleteNews] = useDeleteNewsMutation();\r\n\r\n  const handleAdd = () => {\r\n    setModalType(\"add\");\r\n    setSelectedNews(null);\r\n    setContent(\"\");\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEdit = (newsItem) => {\r\n    setModalType(\"edit\");\r\n    setSelectedNews({\r\n      ...newsItem,\r\n      category: String(newsItem.category_id),\r\n      image: newsItem.image,\r\n    });\r\n    setContent(newsItem.content);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm(\"Apakah anda yakin ingin menghapus berita ini?\")) {\r\n      try {\r\n        await deleteNews(id).unwrap();\r\n        toast.success(\"Berita berhasil dihapus\");\r\n        refetch();\r\n      } catch (error) {\r\n        toast.error(error.data?.message || \"Gagal menghapus berita\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    const submitData = {\r\n      ...formData,\r\n      content,\r\n      id: selectedNews?.id,\r\n    };\r\n\r\n    // Validasi: hanya wajib gambar saat tambah\r\n    if (\r\n      !submitData.title ||\r\n      !submitData.category ||\r\n      !submitData.content ||\r\n      (!submitData.image && !selectedNews)\r\n    ) {\r\n      toast.error(\"Mohon lengkapi semua data\");\r\n      return;\r\n    }\r\n\r\n    const dataToSend = new FormData();\r\n    dataToSend.append(\"title\", submitData.title);\r\n    dataToSend.append(\"category\", submitData.category);\r\n    dataToSend.append(\"content\", submitData.content);\r\n    if (submitData.id) dataToSend.append(\"id\", submitData.id);\r\n\r\n    if (submitData.image instanceof File) {\r\n      dataToSend.append(\"image\", submitData.image);\r\n    } else if (typeof submitData.image === \"string\" && submitData.image) {\r\n      dataToSend.append(\"image\", submitData.image);\r\n    }\r\n\r\n    try {\r\n      await addNews(dataToSend).unwrap();\r\n    } catch (error) {\r\n      toast.error(error.data?.message || \"Gagal menyimpan berita\");\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSelectedNews(null);\r\n    setContent(\"\");\r\n    setIsModalOpen(false);\r\n    setFormKey((prev) => prev + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      toast.success(msg.message);\r\n      setIsModalOpen(false);\r\n      refetch();\r\n      setSelectedNews(null);\r\n      setContent(\"\");\r\n      setFormKey((prev) => prev + 1);\r\n      reset();\r\n    }\r\n    if (error) {\r\n      toast.error(error.data?.message);\r\n      reset();\r\n    }\r\n  }, [isSuccess, error, msg, reset, refetch]);\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedNews(null);\r\n    setContent(\"\");\r\n    setFormKey((prev) => prev + 1);\r\n  };\r\n\r\n  const handleView = (newsItem) => {\r\n    setDetailNews(newsItem);\r\n    setShowDetail(true);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setShowDetail(false);\r\n    setDetailNews(null);\r\n  };\r\n\r\n  const formFields = [\r\n    {\r\n      name: \"title\",\r\n      label: \"Judul\",\r\n      type: \"text\",\r\n      required: true,\r\n      placeholder: \"Masukkan judul berita\",\r\n    },\r\n    {\r\n      name: \"category\",\r\n      label: \"Kategori\",\r\n      type: \"select\",\r\n      required: true,\r\n      options: categories?.map((category) => ({\r\n        value: String(category.id),\r\n        label: category.name,\r\n      })),\r\n    },\r\n    {\r\n      name: \"image\",\r\n      label: \"Gambar\",\r\n      type: \"file\",\r\n      accept: \"image/*\",\r\n      required: !selectedNews,\r\n      helpText: \"Upload gambar untuk berita\",\r\n    },\r\n  ];\r\n\r\n  if (showDetail && detailNews) {\r\n    return <DetailNews news={detailNews} onBack={handleBack} />;\r\n  }\r\n\r\n  return (\r\n    <Layout title='Berita' levels={[\"cms\"]}>\r\n      <div className='container-fluid py-3 py-md-4'>\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}>\r\n          <div className='d-flex justify-content-between align-items-center mb-2'>\r\n            <div className='d-flex align-items-center'>\r\n              <div\r\n                className='p-3 rounded me-3'\r\n                style={{\r\n                  color: homepage?.primary_color,\r\n                  backgroundColor: homepage?.secondary_color,\r\n                }}>\r\n                <FaNewspaper className='fs-4' />\r\n              </div>\r\n              <h4 className='mb-0'>Berita</h4>\r\n            </div>\r\n            <button\r\n              className='btn btn-sm btn-outline-primary'\r\n              onClick={handleAdd}>\r\n              <i className='bi bi-plus-circle'></i>\r\n              <span className='ms-2'>Tambah Berita</span>\r\n            </button>\r\n          </div>\r\n\r\n          <div className='card border-0 shadow-sm'>\r\n            <div className='card-body'>\r\n              <Table\r\n                isLoading={isLoading}\r\n                page={page}\r\n                setPage={setPage}\r\n                totalPages={totalPage}\r\n                limit={limit}\r\n                setLimit={setLimit}\r\n                setSearch={setSearch}\r\n                totalData={totalData}>\r\n                <table className='mb-0 table table-bordered table-striped table-hover'>\r\n                  <thead>\r\n                    <tr>\r\n                      <th className='text-center align-middle'>No</th>\r\n                      <th className='text-center align-middle'>Judul</th>\r\n                      <th className='text-center align-middle'>Kategori</th>\r\n                      <th className='text-center align-middle'>\r\n                        Tanggal Dibuat\r\n                      </th>\r\n                      <th className='text-center align-middle'>Aksi</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {news?.map((item, index) => (\r\n                      <tr key={item.id}>\r\n                        <td className='text-center align-middle'>\r\n                          {(page - 1) * limit + index + 1}\r\n                        </td>\r\n                        <td className='align-middle'>{item.title}</td>\r\n                        <td className='text-center align-middle'>\r\n                          {item.category_name}\r\n                        </td>\r\n                        <td className='text-center align-middle'>\r\n                          {new Date(item.createdat).toLocaleDateString()}\r\n                        </td>\r\n                        <td className='text-center align-middle'>\r\n                          <div className='d-flex align-items-center justify-content-center gap-2'>\r\n                            <button\r\n                              className='btn btn-sm btn-info'\r\n                              title='Lihat Detail'\r\n                              onClick={() => handleView(item)}>\r\n                              <i className='bi bi-eye'></i>\r\n                            </button>\r\n                            <button\r\n                              className='btn btn-sm btn-warning'\r\n                              onClick={() => handleEdit(item)}>\r\n                              <i className='bi bi-pencil-square'></i>\r\n                            </button>\r\n                            <button\r\n                              className='btn btn-sm btn-danger'\r\n                              onClick={() => handleDelete(item.id)}>\r\n                              <i className='bi bi-trash'></i>\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </Table>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n\r\n      <CmsModal\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        title={modalType === \"add\" ? \"Tambah Berita\" : \"Edit Berita\"}\r\n        size='lg'>\r\n        <CmsForm\r\n          key={formKey}\r\n          fields={formFields}\r\n          initialValues={\r\n            selectedNews || {\r\n              title: \"\",\r\n              category: \"\",\r\n              image: \"\",\r\n            }\r\n          }\r\n          onSubmit={handleSubmit}\r\n          onCancel={handleCancel}\r\n          submitButtonText={\r\n            modalType === \"add\" ? \"Tambah Berita\" : \"Ubah Berita\"\r\n          }\r\n          cancelButtonText='Batal'\r\n          isLoading={addLoading}>\r\n          <div className='mb-3'>\r\n            <label className='form-label'>Konten</label>\r\n            <Editor\r\n              value={content}\r\n              onChange={setContent}\r\n              placeholder='Masukkan konten berita...'\r\n              height='400px'\r\n            />\r\n          </div>\r\n        </CmsForm>\r\n      </CmsModal>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NewsPage;\r\n"],"names":["Quill","register","QuillResizeImage","AudioBlot","import","Audio","create","value","node","super","setAttribute","getAttribute","blotName","tagName","className","Editor","Component","constructor","props","__publicField","this","html","setState","editorHtml","onChange","input","document","createElement","click","onchange","async","file","files","formData","FormData","append","response","fetch","method","body","data","json","editor","_a","reactQuillRef","current","getEditor","range","getSelection","insertEmbed","index","url","error","console","alert","state","React","createRef","componentDidUpdate","prevProps","render","placeholder","height","classname","style","children","jsxRuntimeExports","jsx","ReactQuill","ref","theme","handleChange","modules","handleImageUpload","handleAudioUpload","formats","width","toolbar","container","header","font","size","list","indent","handlers","image","audio","clipboard","matchVisual","resize","propTypes","PropTypes","string","func","isRequired","DetailNews","news","onBack","Layout","title","levels","jsxs","onClick","FaArrowLeft","FaFolder","category_name","category","createdat","FaCalendarAlt","Date","toLocaleDateString","day","month","year","src","alt","maxHeight","objectFit","fontSize","lineHeight","color","dangerouslySetInnerHTML","__html","content","NewsPage","homepage","isModalOpen","setIsModalOpen","useState","modalType","setModalType","selectedNews","setSelectedNews","page","setPage","limit","setLimit","search","setSearch","formKey","setFormKey","setContent","showDetail","setShowDetail","detailNews","setDetailNews","categories","useGetCategoryQuery","isLoading","refetch","useGetNewsQuery","result","totalData","totalPage","addNews","isSuccess","addLoading","msg","reset","useAddNewsMutation","deleteNews","useDeleteNewsMutation","useEffect","c","success","message","prev","toast","handleBack","formFields","name","label","type","required","options","map","String","id","accept","helpText","motion","div","initial","opacity","y","animate","transition","duration","primary_color","backgroundColor","secondary_color","FaNewspaper","Table","totalPages","item","handleEdit","newsItem","category_id","window","confirm","unwrap","handleDelete","CmsModal","isOpen","onClose","CmsForm","fields","initialValues","onSubmit","submitData","dataToSend","File","onCancel","submitButtonText","cancelButtonText"],"mappings":"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"}