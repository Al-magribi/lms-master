import{n as e,o as a,p as s,d as l,j as t,m as i}from"./index-DxiHux_d.js";import{b as n}from"./vendor-CnnDPxwB.js";import{L as r}from"./Layout-BWZgGjOq.js";import{C as c}from"./CmsModal-B3HsRj5W.js";import{C as d}from"./CmsForm-DuteKL6_.js";import{k as o,l as m}from"./index-B8CuzAwO.js";import{F as u,a as h}from"./index-g0LoU_Ie.js";import{T as x}from"./Table-C87Jt7gp.js";const b=({homepage:b})=>{const[j,p]=n.useState(!1),[g,N]=n.useState("add"),[y,f]=n.useState(null),[v,k]=n.useState(1),[w,A]=n.useState(10),[C,S]=n.useState(""),[T,F]=n.useState(0),{data:L,isLoading:_,refetch:q}=e({page:v,limit:w,search:C}),{reasons:D,totalData:M,totalPage:B}=L||{},[P,{isSuccess:E,error:I,isLoading:G,data:O,reset:R}]=a(),[U]=s();n.useEffect((()=>{var e;E&&(l.success(O.message),p(!1),q(),f(null),F((e=>e+1)),R()),I&&(l.error(null==(e=I.data)?void 0:e.message),R())}),[E,I,O,R,q]);const V=[{name:"name",label:"Alasan",type:"text",required:!0,placeholder:"Masukkan alasan"},{name:"description",label:"Deskripsi",type:"textarea",required:!0,placeholder:"Masukkan deskripsi lengkap",rows:4},{name:"icon",label:"Icon",type:"text",required:!0,placeholder:"Masukkan nama icon",helpText:t.jsxs(t.Fragment,{children:["Gunakan icon dari library"," ",t.jsx("a",{href:"https://react-icons.github.io/react-icons/",target:"_blank",rel:"noopener noreferrer",className:"text-primary",children:"react-icons"})," ","FontAwesome 5 atau FontAwesome 6"]})}];return console.log(b),t.jsxs(r,{title:"Alasan",levels:["cms"],children:[t.jsx("div",{className:"container-fluid py-3 py-md-4",children:t.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsxs("div",{className:"d-flex align-items-center",children:[t.jsx("div",{className:" p-3 rounded me-3",style:{color:null==b?void 0:b.primary_color,backgroundColor:null==b?void 0:b.secondary_color},children:t.jsx("i",{className:"bi bi-lightbulb fs-4"})}),t.jsx("h4",{className:"mb-0",children:"Alasan"})]}),t.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{N("add"),f(null),p(!0)},children:[t.jsx("i",{className:"bi bi-plus-circle"}),t.jsx("span",{className:"ms-2",children:"Tambah Alasan"})]})]}),t.jsx("div",{className:"card border-0 shadow-sm",children:t.jsx("div",{className:"card-body",children:t.jsx(x,{isLoading:_,page:v,setPage:k,totalPages:B,limit:w,setLimit:A,setSearch:S,totalData:M,children:t.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-center align-middle",children:"No"}),t.jsx("th",{className:"text-center align-middle",children:"Icon"}),t.jsx("th",{className:"text-center align-middle",children:"Alasan"}),t.jsx("th",{className:"text-center align-middle",children:"Deskripsi"}),t.jsx("th",{className:"text-center align-middle",children:"Aksi"})]})}),t.jsx("tbody",{children:null==D?void 0:D.map(((e,a)=>{var s;const i=(null==(s=null==e?void 0:e.icon)?void 0:s.startsWith("Fa6"))?u[e.icon]||h:o[e.icon]||m;return t.jsxs("tr",{children:[t.jsx("td",{className:"text-center align-middle",children:(v-1)*w+a+1}),t.jsx("td",{className:"text-center align-middle",children:t.jsx("div",{className:"rounded-circle p-3 me-3",style:{color:null==b?void 0:b.primary_color,backgroundColor:null==b?void 0:b.secondary_color},children:t.jsx(i,{className:"fs-2"})})}),t.jsx("td",{className:"align-middle",children:e.name}),t.jsx("td",{className:"align-middle",children:e.description}),t.jsx("td",{className:"text-center align-middle",children:t.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[t.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{N("edit"),f(e),p(!0)})(e),children:t.jsx("i",{className:"bi bi-pencil-square"})}),t.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a;if(window.confirm("Are you sure you want to delete this reason?"))try{await U(e).unwrap(),l.success("Reason deleted successfully"),q()}catch(s){l.error((null==(a=s.data)?void 0:a.message)||"Failed to delete reason")}})(e.id),children:t.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)}))})]})})})})]})}),t.jsx(c,{isOpen:j,onClose:()=>{p(!1),f(null),F((e=>e+1))},title:"add"===g?"Tambah Alasan":"Edit Alasan",children:t.jsx(d,{fields:V,initialValues:y||{name:"",description:"",icon:""},onSubmit:async e=>{try{await P(e).unwrap()}catch(a){console.log(a)}},onCancel:()=>{f(null),p(!1),F((e=>e+1))},submitButtonText:"add"===g?"Tambah Alasan":"Ubah Alasan",cancelButtonText:"Batal",isLoading:G},T)})]})};export{b as default};
//# sourceMappingURL=ReasonsPage-Bq35sLKZ.js.map
