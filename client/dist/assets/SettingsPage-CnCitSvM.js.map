{"version":3,"file":"SettingsPage-CnCitSvM.js","sources":["../../src/page/cms/Settings/SettingsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../layout/Layout\";\r\nimport CmsForm from \"../components/CmsForm\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaCog, FaSave, FaRegLightbulb } from \"react-icons/fa\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport {\r\n  useGetHomepageQuery,\r\n  useUpdateHomepageMutation,\r\n} from \"../../../controller/api/cms/ApiHomepage\";\r\n\r\nconst SettingsPage = () => {\r\n  const [settings, setSettings] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [logoPreview, setLogoPreview] = useState(null);\r\n  const [logoFile, setLogoFile] = useState(null);\r\n  const [iconPreview, setIconPreview] = useState(null);\r\n  const [iconFile, setIconFile] = useState(null);\r\n  const [bannerPreview, setBannerPreview] = useState(null);\r\n  const [bannerFile, setBannerFile] = useState(null);\r\n  const [primaryColor, setPrimaryColor] = useState(\"#0d6efd\");\r\n  const [secondaryColor, setSecondaryColor] = useState(\"#cfe2ff\");\r\n\r\n  // Bootstrap base colors with their variations\r\n  const baseColors = [\r\n    { name: \"Blue\", value: \"#0d6efd\", light: \"#cfe2ff\" },\r\n    { name: \"Indigo\", value: \"#6610f2\", light: \"#e0cffc\" },\r\n    { name: \"Purple\", value: \"#6f42c1\", light: \"#e2d9f3\" },\r\n    { name: \"Pink\", value: \"#d63384\", light: \"#f7d6e6\" },\r\n    { name: \"Red\", value: \"#dc3545\", light: \"#f8d7da\" },\r\n    { name: \"Orange\", value: \"#fd7e14\", light: \"#ffe5d0\" },\r\n    { name: \"Yellow\", value: \"#ffc107\", light: \"#fff3cd\" },\r\n    { name: \"Green\", value: \"#198754\", light: \"#d1e7dd\" },\r\n    { name: \"Teal\", value: \"#20c997\", light: \"#d2f4ea\" },\r\n    { name: \"Cyan\", value: \"#0dcaf0\", light: \"#cff4fc\" },\r\n  ];\r\n\r\n  // Function to generate a lighter shade of a color\r\n  const generateLightColor = (hexColor) => {\r\n    // Convert hex to RGB\r\n    const r = parseInt(hexColor.slice(1, 3), 16);\r\n    const g = parseInt(hexColor.slice(3, 5), 16);\r\n    const b = parseInt(hexColor.slice(5, 7), 16);\r\n\r\n    // Mix with white (255, 255, 255) with 85% white\r\n    const mixRatio = 0.85;\r\n    const lightR = Math.round(r * (1 - mixRatio) + 255 * mixRatio);\r\n    const lightG = Math.round(g * (1 - mixRatio) + 255 * mixRatio);\r\n    const lightB = Math.round(b * (1 - mixRatio) + 255 * mixRatio);\r\n\r\n    // Convert back to hex\r\n    return `#${lightR.toString(16).padStart(2, \"0\")}${lightG\r\n      .toString(16)\r\n      .padStart(2, \"0\")}${lightB.toString(16).padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const {\r\n    data,\r\n    isLoading: getLoading,\r\n    refetch,\r\n    error: getError,\r\n  } = useGetHomepageQuery();\r\n\r\n  const [\r\n    updateHomepage,\r\n    { isLoading: updateLoading, isSuccess, isError, error, reset, data: msg },\r\n  ] = useUpdateHomepageMutation();\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      setSettings(data);\r\n      setLogoPreview(data.logo);\r\n      setIconPreview(data.icon);\r\n      setBannerPreview(data.banner);\r\n      setPrimaryColor(data.primary_color || \"#0d6efd\");\r\n      setSecondaryColor(data.secondary_color || \"#cfe2ff\");\r\n      setIsLoading(false);\r\n    }\r\n  }, [data]);\r\n\r\n  const handleIconChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setIconFile(file);\r\n      // Create preview URL\r\n      const previewUrl = URL.createObjectURL(file);\r\n      setIconPreview(previewUrl);\r\n    }\r\n  };\r\n\r\n  const handleBannerChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setBannerFile(file);\r\n      // Create preview URL\r\n      const previewUrl = URL.createObjectURL(file);\r\n      setBannerPreview(previewUrl);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    try {\r\n      const formDataToSend = new FormData();\r\n\r\n      // Create a complete data object including the colors\r\n      const completeData = {\r\n        ...formData,\r\n        primary_color: primaryColor,\r\n        secondary_color: secondaryColor,\r\n      };\r\n\r\n      // Append all fields except icon, logo, and banner\r\n      Object.keys(completeData).forEach((key) => {\r\n        if (![\"icon\", \"logo\", \"banner\"].includes(key)) {\r\n          formDataToSend.append(key, completeData[key]);\r\n        }\r\n      });\r\n\r\n      // Append files if they exist\r\n      if (iconFile) {\r\n        formDataToSend.append(\"icon\", iconFile);\r\n      } else if (settings?.icon) {\r\n        formDataToSend.append(\"icon\", settings.icon);\r\n      }\r\n\r\n      if (logoFile) {\r\n        formDataToSend.append(\"logo\", logoFile);\r\n      } else if (settings?.logo) {\r\n        formDataToSend.append(\"logo\", settings.logo);\r\n      }\r\n\r\n      if (bannerFile) {\r\n        formDataToSend.append(\"banner\", bannerFile);\r\n      } else if (settings?.banner) {\r\n        formDataToSend.append(\"banner\", settings.banner);\r\n      }\r\n\r\n      // Validate file sizes before upload\r\n      const maxSize = 2 * 1024 * 1024; // 2MB\r\n      const files = [\r\n        { file: iconFile, name: \"Icon\" },\r\n        { file: logoFile, name: \"Logo\" },\r\n        { file: bannerFile, name: \"Banner\" },\r\n      ];\r\n\r\n      for (const { file, name } of files) {\r\n        if (file && file.size > maxSize) {\r\n          toast.error(`Ukuran file ${name} terlalu besar. Maksimal 2MB`);\r\n          return;\r\n        }\r\n      }\r\n\r\n      await toast.promise(updateHomepage(formDataToSend).unwrap(), {\r\n        loading: \"Menyimpan pengaturan...\",\r\n        success: (response) => {\r\n          // Reset file states after successful update\r\n          setIconFile(null);\r\n          setLogoFile(null);\r\n          setBannerFile(null);\r\n          return \"Pengaturan berhasil disimpan\";\r\n        },\r\n        error: (err) => {\r\n          console.error(\"Error details:\", err);\r\n          return err.data?.message || \"Gagal menyimpan pengaturan\";\r\n        },\r\n      });\r\n\r\n      // Refresh the data\r\n      refetch();\r\n    } catch (error) {\r\n      console.error(\"Error in handleSubmit:\", error);\r\n      toast.error(\r\n        error.data?.message || \"Terjadi kesalahan saat menyimpan pengaturan\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleLogoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setLogoFile(file);\r\n      // Create preview URL\r\n      const previewUrl = URL.createObjectURL(file);\r\n      setLogoPreview(previewUrl);\r\n    }\r\n  };\r\n\r\n  const handleColorChange = async (color) => {\r\n    const lightColor = generateLightColor(color);\r\n\r\n    // Langsung update ke backend\r\n    if (settings) {\r\n      try {\r\n        const formDataToSend = new FormData();\r\n        // Gabungkan data settings lama dengan warna baru\r\n        Object.entries({\r\n          ...settings,\r\n          primary_color: color,\r\n          secondary_color: lightColor,\r\n        }).forEach(([key, value]) => {\r\n          if (key !== \"logo\" && key !== \"icon\" && key !== \"banner\") {\r\n            formDataToSend.append(key, value);\r\n          }\r\n        });\r\n        // Logo (jika ada)\r\n        if (logoFile) {\r\n          formDataToSend.append(\"logo\", logoFile);\r\n        } else if (settings.logo) {\r\n          formDataToSend.append(\"logo\", settings.logo);\r\n        }\r\n        // Icon (jika ada)\r\n        if (iconFile) {\r\n          formDataToSend.append(\"icon\", iconFile);\r\n        } else if (settings.icon) {\r\n          formDataToSend.append(\"icon\", settings.icon);\r\n        }\r\n        // Banner (jika ada)\r\n        if (bannerFile) {\r\n          formDataToSend.append(\"banner\", bannerFile);\r\n        } else if (settings.banner) {\r\n          formDataToSend.append(\"banner\", settings.banner);\r\n        }\r\n        // Panggil updateHomepage\r\n        await updateHomepage(formDataToSend).unwrap();\r\n        toast.success(\"Warna berhasil diperbarui!\");\r\n      } catch (error) {\r\n        toast.error(\"Gagal memperbarui warna\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // Helper function to convert hex to RGB\r\n  const hexToRgb = (hex) => {\r\n    const r = parseInt(hex.slice(1, 3), 16);\r\n    const g = parseInt(hex.slice(3, 5), 16);\r\n    const b = parseInt(hex.slice(5, 7), 16);\r\n    return `${r}, ${g}, ${b}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n      refetch();\r\n      window.location.reload();\r\n      // Reset logo, icon, and banner file states after successful update\r\n      setLogoFile(null);\r\n      setIconFile(null);\r\n      setBannerFile(null);\r\n    }\r\n    if (isError) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError, msg, error, refetch, reset]);\r\n\r\n  // Cleanup preview URLs when component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      if (iconPreview) URL.revokeObjectURL(iconPreview);\r\n      if (logoPreview) URL.revokeObjectURL(logoPreview);\r\n      if (bannerPreview) URL.revokeObjectURL(bannerPreview);\r\n    };\r\n  }, []);\r\n\r\n  const formFields = [\r\n    {\r\n      name: \"name\",\r\n      label: \"Site Name\",\r\n      type: \"text\",\r\n      required: true,\r\n    },\r\n    {\r\n      name: \"tagline\",\r\n      label: \"Tagline\",\r\n      type: \"text\",\r\n      required: true,\r\n    },\r\n    {\r\n      name: \"description\",\r\n      label: \"Description\",\r\n      type: \"textarea\",\r\n      required: true,\r\n    },\r\n    {\r\n      name: \"video_url\",\r\n      label: \"Video URL\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"youtube\",\r\n      label: \"YouTube\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"instagram\",\r\n      label: \"Instagram\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"facebook\",\r\n      label: \"Facebook\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"ppdb_url\",\r\n      label: \"PPDB URL\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"address\",\r\n      label: \"Alamat\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"title_reason\",\r\n      label: \"Judul Alasan\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"desc_reason\",\r\n      label: \"Deskripsi Alasan\",\r\n      type: \"textarea\",\r\n    },\r\n    {\r\n      name: \"title_facility\",\r\n      label: \"Judul Fasilitas\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"desc_facility\",\r\n      label: \"Deskripsi Fasilitas\",\r\n      type: \"textarea\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Layout title='Pengaturan' levels={[\"cms\"]}>\r\n      <div className='container-fluid py-3 py-md-4'>\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}>\r\n          <div className='d-flex align-items-center mb-4'>\r\n            <div\r\n              style={{\r\n                backgroundColor: data?.secondary_color,\r\n                color: data?.primary_color,\r\n              }}\r\n              className=' p-3 rounded me-3'>\r\n              <FaCog className='fs-4' />\r\n            </div>\r\n            <h4 className='mb-0'>Pengaturan</h4>\r\n          </div>\r\n\r\n          <div className='card border-0 shadow-sm'>\r\n            <div className='card-body'>\r\n              {isLoading || getLoading || updateLoading ? (\r\n                <div className='text-center py-5'>\r\n                  <div className='spinner-border text-primary' role='status'>\r\n                    <span className='visually-hidden'>Loading...</span>\r\n                  </div>\r\n                  <p className='mt-2'>Loading settings...</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className='d-flex flex-wrap gap-4 mb-4'>\r\n                    <div className='flex-grow-1 min-width-300'>\r\n                      <label className='form-label fw-bold mb-3'>\r\n                        Icon Website\r\n                      </label>\r\n                      <div className='d-flex flex-column gap-3'>\r\n                        <div className='image-preview-container bg-light rounded p-3 text-center'>\r\n                          {iconPreview ? (\r\n                            <img\r\n                              src={iconPreview}\r\n                              alt='Icon preview'\r\n                              style={{\r\n                                width: \"80px\",\r\n                                height: \"80px\",\r\n                                objectFit: \"contain\",\r\n                              }}\r\n                              className='mb-3'\r\n                            />\r\n                          ) : (\r\n                            <div className='placeholder-image mb-3'>\r\n                              <FaCog className='fs-1 text-secondary' />\r\n                            </div>\r\n                          )}\r\n                          <input\r\n                            type='file'\r\n                            className='form-control'\r\n                            accept='image/*'\r\n                            onChange={handleIconChange}\r\n                          />\r\n                        </div>\r\n                        <small className='text-muted'>\r\n                          Unggah icon website dengan ukuran yang disarankan\r\n                          32x32 pixel\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className='flex-grow-1 min-width-300'>\r\n                      <label className='form-label fw-bold mb-3'>\r\n                        Logo Website\r\n                      </label>\r\n                      <div className='d-flex flex-column gap-3'>\r\n                        <div className='image-preview-container bg-light rounded p-3 text-center'>\r\n                          {logoPreview ? (\r\n                            <img\r\n                              src={logoPreview}\r\n                              alt='Logo preview'\r\n                              style={{\r\n                                height: \"100px\",\r\n                                maxWidth: \"300px\",\r\n                                objectFit: \"contain\",\r\n                              }}\r\n                              className='mb-3'\r\n                            />\r\n                          ) : (\r\n                            <div className='placeholder-image mb-3'>\r\n                              <FaCog className='fs-1 text-secondary' />\r\n                            </div>\r\n                          )}\r\n                          <input\r\n                            type='file'\r\n                            className='form-control'\r\n                            accept='image/*'\r\n                            onChange={handleLogoChange}\r\n                          />\r\n                        </div>\r\n                        <small className='text-muted'>\r\n                          Unggah logo website dengan ukuran yang disarankan\r\n                          200x50 pixel\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className='flex-grow-1 min-width-300'>\r\n                      <label className='form-label fw-bold mb-3'>\r\n                        Banner Website\r\n                      </label>\r\n                      <div className='d-flex flex-column gap-3'>\r\n                        <div className='image-preview-container bg-light rounded p-3 text-center'>\r\n                          {bannerPreview ? (\r\n                            <img\r\n                              src={bannerPreview}\r\n                              alt='Banner preview'\r\n                              style={{\r\n                                width: \"100%\",\r\n                                height: \"150px\",\r\n                                objectFit: \"cover\",\r\n                              }}\r\n                              className='mb-3'\r\n                            />\r\n                          ) : (\r\n                            <div className='placeholder-image mb-3'>\r\n                              <FaCog className='fs-1 text-secondary' />\r\n                            </div>\r\n                          )}\r\n                          <input\r\n                            type='file'\r\n                            className='form-control'\r\n                            accept='image/*'\r\n                            onChange={handleBannerChange}\r\n                          />\r\n                        </div>\r\n                        <small className='text-muted'>\r\n                          Unggah banner website dengan ukuran yang disarankan\r\n                          1920x400 pixel\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <style jsx>{`\r\n                    .min-width-300 {\r\n                      min-width: 300px;\r\n                    }\r\n                    .image-preview-container {\r\n                      min-height: 200px;\r\n                      display: flex;\r\n                      flex-direction: column;\r\n                      justify-content: center;\r\n                      align-items: center;\r\n                    }\r\n                    .placeholder-image {\r\n                      width: 80px;\r\n                      height: 80px;\r\n                      display: flex;\r\n                      align-items: center;\r\n                      justify-content: center;\r\n                      color: #6c757d;\r\n                    }\r\n                  `}</style>\r\n\r\n                  <CmsForm\r\n                    fields={formFields}\r\n                    initialValues={settings}\r\n                    onSubmit={handleSubmit}\r\n                    submitButtonText='Simpan'\r\n                    submitButtonIcon={<FaSave className='me-2' />}\r\n                  />\r\n                </>\r\n              )}\r\n\r\n              <div className='mt-4'>\r\n                <h4>Pengaturan Warna</h4>\r\n                <div className='mt-4'>\r\n                  <div className='d-flex align-items-center justify-content-between mb-3'>\r\n                    <label className='form-label mb-0'>Primary Color</label>\r\n                    <div className='d-flex align-items-center gap-2'>\r\n                      <div\r\n                        className='rounded-circle'\r\n                        style={{\r\n                          backgroundColor: secondaryColor,\r\n                          width: \"40px\",\r\n                          height: \"40px\",\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          justifyContent: \"center\",\r\n                          border: \"2px solid #dee2e6\",\r\n                        }}>\r\n                        <FaRegLightbulb\r\n                          style={{ color: primaryColor }}\r\n                          className='fs-4'\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className='d-flex flex-wrap gap-2'>\r\n                    {baseColors.map((color) => (\r\n                      <div\r\n                        key={color.name}\r\n                        className='rounded-circle'\r\n                        style={{\r\n                          backgroundColor: color.value,\r\n                          width: \"30px\",\r\n                          height: \"30px\",\r\n                          border: \"2px solid #dee2e6\",\r\n                          cursor: \"pointer\",\r\n                        }}\r\n                        onClick={() => handleColorChange(color.value)}\r\n                        title={color.name}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className='mt-3'>\r\n                    <input\r\n                      type='color'\r\n                      className='form-control form-control-color'\r\n                      value={primaryColor}\r\n                      onChange={(e) => handleColorChange(e.target.value)}\r\n                      title='Choose your color'\r\n                    />\r\n                  </div>\r\n\r\n                  <div className='mt-3'>\r\n                    <small className='text-muted'>\r\n                      Selected Colors:\r\n                      <div className='d-flex gap-2 mt-1'>\r\n                        <div className='d-flex align-items-center'>\r\n                          <div\r\n                            className='rounded-circle me-1'\r\n                            style={{\r\n                              backgroundColor: primaryColor,\r\n                              width: \"20px\",\r\n                              height: \"20px\",\r\n                              border: \"1px solid #dee2e6\",\r\n                            }}></div>\r\n                          Primary: {primaryColor}\r\n                        </div>\r\n                        <div className='d-flex align-items-center'>\r\n                          <div\r\n                            className='rounded-circle me-1'\r\n                            style={{\r\n                              backgroundColor: secondaryColor,\r\n                              width: \"20px\",\r\n                              height: \"20px\",\r\n                              border: \"1px solid #dee2e6\",\r\n                            }}></div>\r\n                          Secondary: {secondaryColor}\r\n                        </div>\r\n                      </div>\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n"],"names":["SettingsPage","settings","setSettings","useState","isLoading","setIsLoading","logoPreview","setLogoPreview","logoFile","setLogoFile","iconPreview","setIconPreview","iconFile","setIconFile","bannerPreview","setBannerPreview","bannerFile","setBannerFile","primaryColor","setPrimaryColor","secondaryColor","setSecondaryColor","data","getLoading","refetch","error","getError","useGetHomepageQuery","updateHomepage","updateLoading","isSuccess","isError","reset","msg","useUpdateHomepageMutation","useEffect","logo","icon","banner","primary_color","secondary_color","handleColorChange","async","color","lightColor","hexColor","r","parseInt","slice","g","b","mixRatio","lightR","Math","round","lightG","lightB","toString","padStart","generateLightColor","formDataToSend","FormData","Object","entries","forEach","key","value","append","unwrap","toast","success","window","location","reload","URL","revokeObjectURL","jsx","Layout","title","levels","children","className","jsxRuntimeExports","jsxs","motion","div","initial","opacity","y","animate","transition","duration","style","backgroundColor","FaCog","role","Fragment","src","alt","width","height","objectFit","type","accept","onChange","e","file","target","files","previewUrl","createObjectURL","maxWidth","CmsForm","fields","name","label","required","initialValues","onSubmit","formData","completeData","keys","includes","maxSize","size","c","promise","loading","response","err","console","_a","message","submitButtonText","submitButtonIcon","FaSave","display","alignItems","justifyContent","border","FaRegLightbulb","light","map","cursor","onClick"],"mappings":"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"}