import{a as e,b as s,c as a,j as i,d as t,s as n}from"./index-DAvLbB94.js";import{u as l,b as r}from"./vendor-CnnDPxwB.js";const c=({data:c})=>{const d=e(),o=l(),{user:x,isSignin:h}=s((e=>e.auth)),m={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard",cms:"/cms-dashboard"};r.useEffect((()=>{h&&(null==x?void 0:x.level)&&o(m[x.level])}),[h,x,o]);const[p,u]=r.useState("none"),[b,j]=r.useState(!1),[g,f]=r.useState(""),[N,v]=r.useState(""),[w,y]=r.useState(!1),[k,{isLoading:S,data:C}]=a(),[z,M]=r.useState({}),L=e=>{u(e),f(""),M({})};return h&&(null==x?void 0:x.level)?i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:"Mengalihkan ke dashboard..."})]})}):i.jsxs("div",{children:[i.jsx("div",{className:"area",children:i.jsxs("ul",{className:"circles",children:[i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[(null==c?void 0:c.icon)&&i.jsx("img",{src:null==c?void 0:c.icon,alt:"logo",style:{height:120,width:120,marginBottom:"1rem"},className:"pointer",onClick:()=>window.location.href="/"}),"none"===p&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>L("admin"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>L("teacher"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>L("student"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>L("parent"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>{u(""),j(!0),f(""),M({})},children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),"none"!==p&&!b&&i.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:async e=>{var s;if(e.preventDefault(),!(()=>{const e={};return g.trim()||(e.account="Field ini wajib diisi"),N||(e.password="Password wajib diisi"),M(e),0===Object.keys(e).length})())return;const a=t.loading("Memproses login..."),i={password:N,..."student"===p?{nis:g}:"teacher"===p?{username:g}:"parent"===p?{name:g}:{email:g}};try{const e=await k(i).unwrap();d(n(e.user)),t.success("Login berhasil",{id:a}),o(m[e.user.level]||"/")}catch(l){const e=(null==(s=l.data)?void 0:s.message)||"Gagal masuk. Silakan coba lagi.";t.error(e,{id:a}),v("")}},children:[i.jsxs("div",{className:"input-group",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"bi "+("student"===p?"bi-person-badge":"teacher"===p?"bi-person-workspace":"bi-envelope")})}),i.jsx("input",{type:"admin"===p||"parent"===p?"email":"text",placeholder:"student"===p?"NIS":"teacher"===p?"USERNAME":"EMAIL",value:g,onChange:e=>{f(e.target.value),M({...z,account:""})},required:!0,className:"form-control "+(z.account?"is-invalid":"")}),z.account&&i.jsx("div",{className:"invalid-feedback",children:z.account})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"bi bi-lock-fill"})}),i.jsx("input",{type:w?"text":"password",placeholder:"Password",className:"form-control "+(z.password?"is-invalid":""),value:N,onChange:e=>{v(e.target.value),M({...z,password:""})},required:!0}),z.password&&i.jsx("div",{className:"invalid-feedback",children:z.password})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:w,onChange:()=>{y((e=>!e))}}),i.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),i.jsxs("div",{className:"d-flex justify-content-between",children:[i.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>u("none"),children:[i.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),i.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:S,children:S?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),i.jsx("span",{role:"status",children:"Loading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),b&&i.jsx(SignUp,{setRole:()=>{u("none"),j(!1),f(""),M({})}})]})]})};export{c as default};
//# sourceMappingURL=Signin-DBgJGGc4.js.map
