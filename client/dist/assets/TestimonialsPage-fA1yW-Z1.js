import{v as e,w as a,x as s,d as i,j as t,m as n}from"./index-DAvLbB94.js";import{b as l}from"./vendor-CnnDPxwB.js";import{L as d}from"./Layout-Dl4dmZvm.js";import{C as r}from"./CmsModal-DgymhDA2.js";import{C as c}from"./CmsForm-CV9EwIBO.js";import{c as m}from"./index-B8CuzAwO.js";import{T as o}from"./Table-BVJYUMLF.js";const h=({homepage:h})=>{const[u,x]=l.useState(!1),[j,b]=l.useState("add"),[p,g]=l.useState(null),[N,y]=l.useState(1),[f,v]=l.useState(10),[T,k]=l.useState(""),[w,C]=l.useState(0),{data:S,isLoading:L,refetch:q}=e({page:N,limit:f,search:T}),{results:D,totalData:M,totalPage:B}=S||{},[P,{isSuccess:A,error:E,isLoading:G,data:_,reset:F}]=a(),[O]=s();l.useEffect((()=>{var e;A&&(i.success(_.message),x(!1),q(),g(null),C((e=>e+1)),F()),E&&(i.error(null==(e=E.data)?void 0:e.message),F())}),[A,E,_,F,q]);return t.jsxs(d,{title:"Testimoni",levels:["cms"],children:[t.jsx("div",{className:"container-fluid py-3 py-md-4",children:t.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsxs("div",{className:"d-flex align-items-center",children:[t.jsx("div",{className:"p-3 rounded me-3",style:{color:null==h?void 0:h.primary_color,backgroundColor:null==h?void 0:h.secondary_color},children:t.jsx(m,{className:"fs-4"})}),t.jsx("h4",{className:"mb-0",children:"Testimoni"})]}),t.jsxs("button",{"outline-":!0,className:"btn btn-sm btn-outline-primary",onClick:()=>{b("add"),g(null),x(!0)},children:[t.jsx("i",{className:"bi bi-plus-circle"}),t.jsx("span",{className:"ms-2",children:"Tambah Testimoni"})]})]}),t.jsx("div",{className:"card border-0 shadow-sm",children:t.jsx("div",{className:"card-body",children:t.jsx(o,{isLoading:L,page:N,setPage:y,totalPages:B,limit:f,setLimit:v,setSearch:k,totalData:M,children:t.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-center align-middle",children:"No"}),t.jsx("th",{className:"text-center align-middle",children:"Nama"}),t.jsx("th",{className:"text-center align-middle",children:"Deskripsi"}),t.jsx("th",{className:"text-center align-middle",children:"Testimoni"}),t.jsx("th",{className:"text-center align-middle",children:"Aksi"})]})}),t.jsx("tbody",{children:null==D?void 0:D.map(((e,a)=>t.jsxs("tr",{children:[t.jsx("td",{className:"text-center align-middle",children:(N-1)*f+a+1}),t.jsx("td",{className:"align-middle",children:e.name}),t.jsx("td",{className:"align-middle",children:e.description}),t.jsx("td",{className:"align-middle",children:e.testimonial}),t.jsx("td",{className:"text-center align-middle",children:t.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[t.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{b("edit"),g(e),x(!0)})(e),children:t.jsx("i",{className:"bi bi-pencil-square"})}),t.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a;if(window.confirm("Apakah anda yakin ingin menghapus testimoni ini?"))try{await O(e).unwrap(),i.success("Testimoni berhasil dihapus"),q()}catch(s){i.error((null==(a=s.data)?void 0:a.message)||"Gagal menghapus testimoni")}})(e.id),children:t.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)))})]})})})})]})}),t.jsx(r,{isOpen:u,onClose:()=>{x(!1),g(null),C((e=>e+1))},title:"add"===j?"Tambah Testimoni":"Edit Testimoni",children:t.jsx(c,{fields:[{name:"name",label:"Nama",type:"text",required:!0,placeholder:"Masukkan nama"},{name:"description",label:"Deskripsi",type:"text",required:!0,placeholder:"Masukkan deskripsi"},{name:"testimonial",label:"Testimoni",type:"textarea",required:!0,placeholder:"Masukkan testimoni"}],initialValues:p||{name:"",description:"",testimonial:""},onSubmit:async e=>{var a;try{await P(e).unwrap()}catch(s){console.log(s),i.error((null==(a=s.data)?void 0:a.message)||"Gagal menyimpan testimoni")}},onCancel:()=>{g(null),x(!1),C((e=>e+1))},submitButtonText:"add"===j?"Tambah Testimoni":"Ubah Testimoni",cancelButtonText:"Batal",isLoading:G},w)})]})};export{h as default};
//# sourceMappingURL=TestimonialsPage-fA1yW-Z1.js.map
